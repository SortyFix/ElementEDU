<form (ngSubmit)="onSubmit()" [formGroup]="this.form">

    <!-- title -->
    <app-form-title title="Setup Password for {{ loginData?.loginName }}">
        <ng-container *ngIf="loginData?.credentialTemporary">
            <p>You've logged in with a temporary password. Please create a new one to secure your account.</p>
        </ng-container>
        Enter the password you would like to set for {{ loginData?.loginName }}.
    </app-form-title>

    <!-- form fields -->
    <!-- Don't know where to add this sentence -->
    <!-- The password must be at least 6 characters long and include at least one lowercase letter, one uppercase letter, and one special character. -->
    <mat-form-field appearance="outline">
        <mat-label>Password</mat-label>
        <input [type]="inputType('password')"
               autofocus
               formControlName="password"
               matInput
               name="password" placeholder="Password" required>

        <button (click)="toggleVisibility('password')"
                mat-icon-button
                matSuffix
                type="button">
            <mat-icon>{{ icon('password') }}</mat-icon>
        </button>

        @if (form.get('password')?.hasError('serverError')) {
            <mat-error>{{ form.get('password')?.getError('serverError') }}</mat-error>
        }

    </mat-form-field>

    <mat-form-field appearance="outline">
        <mat-label>Repeat Password</mat-label>
        <input [type]="inputType('repeatPassword')"
               autofocus
               formControlName="repeatPassword"
               matInput
               name="password" placeholder="Repeat Password" required>

        <button (click)="toggleVisibility('repeatPassword')"
                mat-icon-button
                matSuffix
                type="button">
            <mat-icon>{{ icon('repeatPassword') }}</mat-icon>
        </button>

        @if (form.get('repeatPassword')?.hasError('mismatch')) {
            <mat-error>{{ form.get('repeatPassword')?.getError('mismatch') }}</mat-error>
        }
    </mat-form-field>

    <!-- buttons -->
    <app-footer-buttons buttonText="Set Password"></app-footer-buttons>

</form>
