<div class="container">
    <div class="form-section">
        <h1 class="text">Issue a Sick Note</h1>

        <p class="text">
            Fill in the fields below to send an illness notification request to your school's management.<br>
            You will see the status of your request once it is sent. Please adhere to your school's sickness policy.
        </p>

        <div class="form-container">
            <mat-form-field appearance="outline" class="full-width-field">
                <mat-label>Reason</mat-label>
                <textarea matInput class="reason-textarea" [(ngModel)]="reason"></textarea>
            </mat-form-field>

            <app-file-upload [maxFiles]="1" (filesSelected)="onFilesSelected($event)">
            </app-file-upload>

            <mat-form-field appearance="outline" class="full-width-field">
                <mat-label>End date of sick leave</mat-label>
                <input matInput [matDatepicker]="picker" (dateInput)="setDate($event)" (dateChange)="setDate($event)">
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>

            <button mat-flat-button class="submit-button" (click)="onRequestSent()">
                Send Request
            </button>
        </div>
    </div>

    <div class="sick-notes-section">
        <h2>Your Sick Notes</h2>
        <div class="sick-notes-container" *ngIf="illnessNotifications.length > 0; else noNotes">
            <div class="sick-note-card" *ngFor="let x of illnessNotifications">
                <div class="sick-note-header">
                    <mat-icon class="status-icon">
                        {{ getAppropriateIcon(x.status) }}
                    </mat-icon>
                    <span class="status-text">{{ x.status }}</span>
                </div>
                <div class="sick-note-body">
                    <p><strong>ID:</strong> {{ x.id }}</p>
                    <p><strong>Submitted:</strong> {{ formatDate(x.timestamp) }}</p>
                    <p><strong>Valid Until:</strong> {{ formatDate(x.expirationTime) }}</p>
                </div>
            </div>
        </div>
        <ng-template #noNotes>
            <p>No sick notes available.</p>
        </ng-template>
    </div>
</div>
