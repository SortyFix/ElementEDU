plugins {
    id "com.github.node-gradle.node" version "7.0.1"
}


def nodejs = "22.2.0"
def npm = "10.8.3"
def angularVersion = "18.2.2"

node {
    version = nodejs
    npmVersion = npm
    download = true
}

tasks.register("ngServe", NodeTask).configure {
    dependsOn("installAngularCli")
    dependsOn("npmUpdate")
    script = file("node_modules/@angular/cli/bin/ng.js")
    args = ["serve"]
}

tasks.register("printVersion", NodeTask).configure {
    dependsOn("installAngularCli")
    dependsOn("npmUpdate")
    script = file("node_modules/@angular/cli/bin/ng.js")
    args = ["version"]
}

tasks.register("installAngularCli", NpmTask).configure {
    args = ["install", "@angular/cli@${angularVersion}"]
}

tasks.register("npmUpdate", NpmTask).configure {
    args = ["update", "--force"]
}
